#include <Wire.h>
#include <LiquidCrystal_I2C.h>

#define FLAME_SENSOR_PIN 2
#define LED_PIN 3
#define BUZZER_PIN 4

LiquidCrystal_I2C lcd(0x27, 16, 2); 

void setup() {
  pinMode(FLAME_SENSOR_PIN, INPUT);
  pinMode(LED_PIN, OUTPUT);
  pinMode(BUZZER_PIN, OUTPUT);

  Serial.begin(9600);

  lcd.init();
  lcd.backlight();
  lcd.setCursor(0, 0);
  lcd.print("Flame Sensor:");
}

void loop() {
  int flameDetected = digitalRead(FLAME_SENSOR_PIN);

  if (flameDetected == HIGH) {
    Serial.println("UPIN, IPIN, APIIII");

    lcd.setCursor(0, 1);
    lcd.print("                "); 
    lcd.setCursor(0, 1);
    lcd.print("  API TERDETEKSI  ");

    for (int i = 0; i < 10; i++) {
      digitalWrite(BUZZER_PIN, HIGH);
      digitalWrite(LED_PIN, HIGH);
      delay(100);
      digitalWrite(BUZZER_PIN, LOW);
      digitalWrite(LED_PIN, LOW);
      delay(100);
    }
  } else {
    digitalWrite(LED_PIN, LOW);
    digitalWrite(BUZZER_PIN, LOW);

    lcd.setCursor(0, 1);
    lcd.print("                "); 
    lcd.setCursor(0, 1);
    lcd.print("  Aman          ");
  }
}
